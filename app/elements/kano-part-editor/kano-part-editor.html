<link rel="import" href="../kano-ui-editor/kano-ui-editor.html">
<link rel="import" href="../kano-data-editor/kano-data-editor.html">
<link rel="import" href="../kano-light-frame-editor/kano-light-frame-editor.html">
<link rel="import" href="../kano-light-animation-editor/kano-light-animation-editor.html">
<link rel="import" href="../kano-light-shape-configuration/kano-light-shape-configuration.html">
<dom-module id="kano-part-editor">
    <style>
    :host {
        display: block;
        position: relative;
        min-width: 85%;
        text-align: center;
        min-width: 80%;
        border-radius: 6px;
        @apply(--layout-vertical);
    }
    :host iron-lazy-pages {
        @apply(--layout-flex);
        @apply(--layout-vertical);
    }
    kano-light-animation-editor {
        overflow-x: hidden;
    }
    iron-lazy-pages>*:not(template) {
        overflow-y: auto;
        height: 100%;
        @apply(--layout-flex);
    }
    :host .title-bar {
        width: 90%;
        text-align: left;
        padding-bottom: 5px;
        @apply(--layout-horizontal);
        @apply(--layout-justified);
    }
    :host #element-name-editor {
        @apply(--kano-light-input);
        margin-left: 15px;
        border-bottom: 1px dotted var(--color-black, black);
    }
    :host .icon {
        cursor: pointer;
    }
    :host .delete-button {
        color: #de0f30;
    }
    :host #edit-icon {
        width: 20px;
        height: 20px;
    }
    </style>
    <template>
          <div class="title-bar">
              <div class="element-name-editor">
                  <input id="element-name-editor" type="text" value="{{selected.name::keyup}}"
                    on-keydown="enterQuitsInput">
                <label class="icon" for="element-name-editor">
                    <iron-icon id="edit-icon" src="/assets/icons/layout-edit-icon.png"></iron-icon>
                </label>
              </div>

              <label class="icon delete-button" on-tap="_deletePart">delete
                  <iron-icon  src="/assets/icons/layout-bin-icon.png"></iron-icon>
              </label>
          </div>

        <iron-lazy-pages selected="[[configPanel]]" attr-for-selected="name" restamp>
            <template is="iron-lazy-page" name="ui">
                <kano-ui-editor id="ui-editor" selected="{{selected}}"></kano-ui-editor>
            </template>
            <template is="iron-lazy-page" name="data">
                <kano-data-editor id="data-editor" selected="{{selected}}"></kano-data-editor>
            </template>
            <template is="iron-lazy-page" name="light-frame">
                <kano-light-frame-editor id="frame-editor" selected="{{selected}}"></kano-light-frame-editor>
            </template>
            <template is="iron-lazy-page" name="light-animation">
                <kano-light-animation-editor id="animation-editor" selected="{{selected}}"></kano-light-animation-editor>
            </template>
            <template is="iron-lazy-page" name="light-shape">
                <kano-light-shape-configuration id="light-shape-editor" element="{{selected}}"></kano-light-shape-configuration>
            </template>
            <template is="iron-lazy-page" name="empty">
                <div></div>
            </template>
        </iron-lazy-pages>
    </template>
</dom-module>
<script type="text/javascript">
    /* globals Polymer */
    Polymer({
        is: 'kano-part-editor',
        properties: {
            selected: {
                type: Object,
                notify: true
            },
            configPanel: {
                type: String,
                computed: '_computeConfigPanel(selected.configPanel)'
            }
        },
        _computeConfigPanel (panel) {
            return panel || 'empty';
        },
        _deletePart () {
            this.fire('delete-part', this.selected);
        },
        enterQuitsInput () {
            if (event.keyCode == 13) {
                this.blur();
                return false;
            }
        }
    });
</script>
